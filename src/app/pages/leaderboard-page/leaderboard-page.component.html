<div class="mx-auto max-w-4xl px-4 py-8 md:px-8">
  <div class="mb-6 flex flex-wrap items-center justify-between gap-3">
    <div>
      <p class="text-xs uppercase tracking-[0.18em] text-neutral-300">Leaderboard</p>
      <h1 class="mt-1 text-3xl font-bold text-white">
        Top Claimers
        <button type="button" (click)="handleWordClick('#rankings')" [disabled]="!canClaimWords()" class="secret-word">
          {{ displayWord('#rankings') }}
        </button>
      </h1>
      <p class="mt-1 text-sm text-neutral-400">
        Live updates
        <button type="button" (click)="handleWordClick('@streaks')" [disabled]="!canClaimWords()" class="secret-word">
          {{ displayWord('@streaks') }}
        </button>
        and
        <button type="button" (click)="handleWordClick('$points')" [disabled]="!canClaimWords()" class="secret-word">
          {{ displayWord('$points') }}
        </button>
        movement.
      </p>
    </div>

    <a
      routerLink="/game"
      class="rounded-lg border border-neutral-600 px-4 py-2 text-sm text-neutral-200 transition hover:border-white hover:text-white"
    >
      Back to Game
    </a>
  </div>

  <section class="rounded-2xl border border-neutral-700 bg-black/70 p-4 md:p-6">
    @if (isLoading()) {
      <p class="text-sm text-neutral-400">Loading leaderboard...</p>
    } @else {
      <div class="overflow-x-auto">
        <table class="min-w-full table-auto border-collapse text-left text-sm">
          <thead>
            <tr class="border-b border-neutral-700 text-neutral-300">
              <th class="px-3 py-2 font-semibold">Rank</th>
              <th class="px-3 py-2 font-semibold">Player</th>
              <th class="px-3 py-2 text-right font-semibold">Score</th>
            </tr>
          </thead>
          <tbody>
            @for (player of leaderboard(); track trackByNickname($index, player); let i = $index) {
              <tr class="leaderboard-row border-b border-neutral-800" [class.leaderboard-row-updated]="isHighlighted(player.nickname)">
                <td class="px-3 py-3 text-neutral-200">{{ i + 1 }}</td>
                <td class="px-3 py-3 font-medium text-neutral-100">{{ player.nickname }}</td>
                <td class="px-3 py-3 text-right font-bold text-white">{{ player.score }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      @if (!leaderboard().length) {
        <p class="mt-3 text-sm text-neutral-400">
          No claims yet. Start the game and become one of the first
          <button type="button" (click)="handleWordClick('!climbers')" [disabled]="!canClaimWords()" class="secret-word">
            {{ displayWord('!climbers') }}
          </button>
          on todayâ€™s
          <button type="button" (click)="handleWordClick('%leaders')" [disabled]="!canClaimWords()" class="secret-word">
            {{ displayWord('%leaders') }}
          </button>
          board.
        </p>
      }
    }
  </section>
</div>

@if (selectedWord) {
  <app-claim-word-modal
    [word]="selectedWord.label"
    [label]="selectedWord.label"
    (close)="closeClaimModal()"
    (claimed)="handleClaimed($event)"
  ></app-claim-word-modal>
}
