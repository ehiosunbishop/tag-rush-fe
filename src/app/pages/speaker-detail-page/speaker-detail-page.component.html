<div class="mx-auto max-w-5xl px-4 py-10 md:px-8">
  <a
    routerLink="/game"
    class="inline-flex rounded-lg border border-white/30 px-4 py-2 text-sm text-neutral-200 transition hover:border-white hover:text-white"
  >
    Back to Event Page
  </a>

  @if (speaker) {
    <section class="mt-6 overflow-hidden rounded-3xl border border-white/15 bg-neutral-950/90">
      <div class="grid lg:grid-cols-[1fr_2fr]">
        <img [src]="speaker.image" [alt]="speaker.name" class="h-full w-full object-cover grayscale" />

        <div class="space-y-5 p-6 md:p-8">
          <p class="text-xs uppercase tracking-[0.2em] text-neutral-400">Speaker Session</p>
          <h1 class="text-3xl font-bold text-white md:text-4xl">{{ speaker.name }}</h1>
          <p class="text-sm text-neutral-300">{{ speaker.title }}</p>

          <div class="rounded-xl border border-white/15 bg-black p-4">
            <p class="text-xs uppercase tracking-wide text-neutral-400">Topic</p>
            <p class="mt-2 text-lg font-semibold text-white">
              {{ speaker.topic }}
              <button
                type="button"
                (click)="openClaimModal('%speaker')"
                class="secret-word"
              >
                %speaker
              </button>
            </p>
          </div>

          <p class="text-neutral-300">
            {{ speaker.summary }}
            <button
              type="button"
              (click)="openClaimModal('%focus')"
              class="secret-word"
            >
              %focus
            </button>
            and
            <button
              type="button"
              (click)="openClaimModal('!brief')"
              class="secret-word"
            >
              !brief
            </button>
            priorities.
          </p>

          <div>
            <h2 class="text-lg font-semibold text-white">What They Will Discuss</h2>
            <ul class="mt-3 space-y-2">
              <li
                *ngFor="let point of speaker.discussionPoints"
                class="rounded-lg border border-white/15 bg-black px-3 py-2 text-sm text-neutral-200"
              >
                {{ point }}
                <button
                  type="button"
                  (click)="openClaimModal('!insight')"
                  class="secret-word"
                >
                  !insight
                </button>
              </li>
            </ul>
          </div>

          <p class="text-sm text-neutral-300">
            Session operators also cover practical cost
            <button
              type="button"
              (click)="openClaimModal('$depth')"
              class="secret-word"
            >
              $depth
            </button>
            and execution tradeoffs.
          </p>
        </div>
      </div>
    </section>
  } @else {
    <section class="mt-6 rounded-2xl border border-white/15 bg-neutral-950/90 p-6">
      <h1 class="text-2xl font-bold text-white">Speaker not found</h1>
      <p class="mt-2 text-sm text-neutral-300">The selected speaker does not exist in the current event lineup.</p>
    </section>
  }
</div>

@if (showHintModal) {
  <div class="fixed inset-0 z-40 flex items-center justify-center bg-black/80 p-4">
    <section class="w-full max-w-sm rounded-2xl border border-white/20 bg-neutral-950 p-5">
      <div class="flex items-start justify-between gap-3">
        <div>
          <p class="text-xs uppercase tracking-[0.2em] text-neutral-400">Speaker Hint</p>
          <h2 class="mt-1 text-lg font-semibold text-white">Pick An Icon To Reveal A Word</h2>
        </div>
        <button
          type="button"
          (click)="closeHintModal()"
          class="rounded-lg border border-white/25 px-3 py-1 text-sm text-neutral-300 hover:border-white hover:text-white"
        >
          Close
        </button>
      </div>

      <div class="mt-4 grid grid-cols-3 gap-2">
        <button
          type="button"
          (click)="revealHintWord()"
          class="rounded-lg border border-white/20 bg-black px-3 py-3 text-center text-sm text-white hover:border-white"
        >
          [*]
        </button>
        <button
          type="button"
          (click)="revealHintWord()"
          class="rounded-lg border border-white/20 bg-black px-3 py-3 text-center text-sm text-white hover:border-white"
        >
          [+]
        </button>
        <button
          type="button"
          (click)="revealHintWord()"
          class="rounded-lg border border-white/20 bg-black px-3 py-3 text-center text-sm text-white hover:border-white"
        >
          [#]
        </button>
      </div>

      @if (revealedHintWord) {
        <p class="mt-4 text-sm text-neutral-300">
          Word unlocked:
          <button
            type="button"
            (click)="claimHintWord()"
            class="secret-word font-semibold"
          >
            {{ revealedHintWord }}
          </button>
        </p>
      }
    </section>
  </div>
}

@if (selectedWord) {
  <app-claim-word-modal
    [word]="selectedWord.label"
    [label]="selectedWord.label"
    (close)="closeClaimModal()"
    (claimed)="handleClaimed($event)"
  ></app-claim-word-modal>
}
